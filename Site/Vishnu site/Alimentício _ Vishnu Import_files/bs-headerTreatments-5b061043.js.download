define("@widget/LAYOUT/c/bs-headerTreatments-5b061043.js",["exports","@widget/LAYOUT/c/bs-overlayTypes"],(function(e,t){"use strict";const{imageDimensionConfig:n,FIT_IMAGE:r,LANDSCAPE:i,CIRCLE:o}=(global.Core||guac["@wsb/guac-widget-core"]).constants.imageDimensions,a=n[i].aspectRatio,u=o,c=[1,1.5,2,3],s=/[.-]wsimg\.com\//;function l(e){return!!s.test(e)}function g(e){let t;if(!e||!l(e))return t;const n=[],r=e.split(/(h:|w:)([\d.]+)(,|\/|$)/g),i=r.length;let o=0;for(let e=2;e<i;e+=4)c.forEach(((t,i)=>{n[i]=(n[i]||"")+r.slice(o,e).join("")+parseFloat(r[e])*t})),o=e+1;try{t=n.map(((t,n)=>{if(t+=r.slice(o,i).join(""),1!==c[n])t+=` ${c[n]}x`;else if(t!==e)throw new Error([e,t]);return t})).join(",\n")}catch(e){}return t||void 0}function d(e){return e?e.split("/").filter(Boolean).map((e=>{const[t,n]=e.split("=");return{name:t,value:n}})):[]}function m(e){return null==e?[]:"string"==typeof e?d(e):Array.isArray(e)?e:Object.entries(e).map((([e,t])=>({name:e,value:t})))}function p(e){return l(e)?e:function(e=""){return e.split("/:/")[0]}(e)}const{headerTreatments:{FILL:f,FIT:w,INSET:I,BLUR:h,LEGACY_BLUR:b}}=(global.Core||guac["@wsb/guac-widget-core"]).constants;e.BLUR=h,e.CDN_REGEX=s,e.CIRCLE_IMAGE_DIMENSION=u,e.FILL=f,e.FIT=w,e.INSET=I,e.LANDSCAPE_ASPECT_RATIO=a,e.LEGACY_BLUR=b,e.addImageApiArgs=function(e,t){const n=function(e){if(!l(e))return null;const[t,n]=e.split("/:/");return{source:t,operations:d(n)}}(e);return null==n?e:function({source:e,operations:t}){if(null==t)return e;const n=t.map((({name:e,value:t})=>null==t?e:`${e}=${t}`)).join("/");return n?e+"/:/"+n:e}({source:n.source,operations:[...n.operations,...m(t)]})},e.generateBackgroundUrl=function(e,t=!0){return p(t?(global.Core||guac["@wsb/guac-widget-core"]).utils.generateBackgroundUrl(e):(global.Core||guac["@wsb/guac-widget-core"]).utils.generateBackgroundUrl(e).replace(/\/rs=w:{width},h:{height},cg:true,m\/cr=w:{width},h:{height},a[x]?:[^/]*/,"").replace(/\/:$/,""))},e.getImageDimensionData=function(e={}){const{outputWidth:t,outputHeight:i,imageDimension:o,enableImageDimension:a}=e,u={},c={...e};if(o)if(o===r)delete c.outputHeight,u.borderRadius=0;else{const{aspectRatio:e,borderRadius:r}=n[o]||{};e&&t?c.outputHeight=t/e:e&&i&&(c.outputWidth=i*e),u.borderRadius=r}return{imageDimensionStyles:u,parsedImageData:c,enableImageDimension:a}},e.getSrcSet=g,e.getVCTScript=function(e){if(!e)return"";const n=(g(e)||"").replace(/(\n)/gm," ");return`(function(){${t.countVctElement};var i=new Image();i.onload=window.markVisuallyComplete;i.srcset="${n||e}";i.src="${e}";})()`},e.getValidUrl=p,e.isInternalUrl=l,e.replaceImageSizeParams=function(e,t=""){return e&&"string"==typeof e?e.replace(/\/:\/rs=w:[0-9]*,h:[0-9]*/,t):""},e.resolveImageSource=function(e,t,n){return"string"==typeof((null==e?void 0:e.imageUrl)||(null==e?void 0:e.image))?(global.Core||guac["@wsb/guac-widget-core"]).utils.generateImageServiceUrl(e):null!=n&&n.fallbackBackgroundImageSrc?n.fallbackBackgroundImageSrc.replace(/\{(width|height)\}/g,"+0"):t||""}})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-headerTreatments-5b061043.js.map
